import ArticleHeader from '../../components/news/ArticleHeader';
import { NextSeo } from 'next-seo';
import Image from 'next/image';
import cloudOverview from '../docs/monitoring/cloud-overview.png';
import cloudXrayTrace from '../docs/monitoring/cloud-xray-trace.png';
import cloudNetworkCreate from './03/cloud-vpc.png';
import cloudXrayFiltersGeneral from '../docs/monitoring/cloud-xray-filters-general.png';
import cloudXrayFiltersAnnotations from '../docs/monitoring/cloud-xray-filters-annotations.png';

<NextSeo description="Bref 3.0 is released and reaches 40 billion invocations every month."
         title="Bref 3.0 is released üéâ"
         openGraph={{
             images: [
                 {
                     url: 'https://bref.sh/news/03-social-card.png',
                 },
             ],
         }}
/>

# Bref 3.0 is released üéâ

<ArticleHeader
    subTitle="Celebrating 40 billion executions per month"
    date="February 2026"
    author="Matthieu Napoli"
    authorGitHub="mnapoli" />

Bref 3.0 is here! Since Bref 2.0, we've grown from 10 billion to **40 billion Lambda executions** (aka requests) every month. The package has been installed more than **9 million times**, and we've reached **4,000 commits** across all Bref repositories.

Today, we celebrate these achievements and **the release of Bref 3.0** üéâ

Let's check out what's new in v3.

## Bref 3.0

Here's a summary, we'll dive into the details below:

- **24% smaller layers** for faster cold starts.
- **Runtimes rebuilt on Amazon Linux 2023**: upgraded from Amazon Linux 2.
- **PHP 8.5 support**
- **PostgreSQL extension** is now enabled by default.
- **Redis extension** is now built-in.
- **Unified PHP runtime**: one layer and one container image instead of three.
- **New regions**: `ap-southeast-3` and `me-central-1`.
- **Better CloudWatch logs** with the new Monolog formatter enabled by default.
- **Lambda request ID and trace ID** exposed as environment variables for easier logging.
- **Simpler Laravel onboarding** with a new `serverless.yml` template.
- **[Bref Cloud](https://bref.sh/cloud)**: private networks, application diagrams, and request tracing.

What did we break? **Almost nothing**, the upgrade should be smooth. Here's an overview:

- PHP 8.2+ is now required (PHP 8.0 and 8.1 support is dropped).
- The `vendor/bin/bref` CLI is removed (it was already 90% removed in v2).
- The SOAP extension is now opt-in (it had very little usage).
- If you deploy using container images, you'll need to update your Dockerfile.
- If you use [`bref/extra-php-extensions`](https://github.com/brefphp/extra-php-extensions), update it from v1 to v3 (there's no v2, versions are aligned with Bref now).

For a complete list of changes and instructions, check out the [**v3 upgrade guide**](../docs/upgrading/v3.mdx).

## Faster Lambda cold starts

The Bref layers for AWS Lambda have been optimized and their size reduced. This leaves more room for your code and should improve cold start times.

- PHP 8.4: 69MB ‚Üí 53MB
- PHP 8.3: 65MB ‚Üí 46MB

This was achieved through plenty of tests leading to these optimizations:

- Stripping debug symbols from all libraries and PHP extensions.
- Compiling PHP with size-optimization flags.
- Disabling the rarely-used SOAP extension by default.
- Bundling some PHP extensions directly into the PHP binary.

## Amazon Linux 2023

Bref 3.0 is built on **[Amazon Linux 2023](https://docs.aws.amazon.com/linux/al2023/ug/what-is-amazon-linux.html)** (AL2023), the latest version of Amazon's Linux distribution for AWS.

The previous Bref versions were built on **Amazon Linux 2** (AL2), which is reaching end of life soon. AWS Lambda will continue to support AL2 for some time, but it's recommended to migrate to AL2023 as soon as possible.

This upgrade brings several benefits:

- **Performance**: AL2023 is leaner than AL2, with more recent kernel and system libraries.
- **Modern packages**: AL2023 ships with more recent package versions, simplifying the Bref build process.
- **Long-term support**: AL2 will be deprecated in June 2026, while AL2023 will be supported at least until 2029.

The migration happens automatically when you upgrade to Bref 3.0, no changes are needed on your end.

## PHP 8.5 support

Bref 3.0 adds support for **PHP 8.5** (which depended on an AL2023 system upgrade). You can start using it by setting the runtime in your `serverless.yml`:

```yaml
functions:
    api:
        handler: public/index.php
        runtime: php-85-fpm
```

## Redis extension built-in

The **Redis extension** is now included in Bref layers by default. Redis is one of the most used extensions by Bref users for caching and session storage.

If you were using the Redis extension from [`bref/extra-php-extensions`](https://github.com/brefphp/extra-php-extensions), remove the layer from your `serverless.yml`:

```diff filename="serverless.yml"
functions:
    api:
        # ...
        layers:
-            - ${bref-extra:redis-php-84}
```

And enable the extension via a `php.ini` file in your project (`php/conf.d/php.ini`):

```diff filename="php/conf.d/php.ini"
extension=redis
```

If Redis was the only `bref/extra-php-extensions` extension you were using, you can uninstall the package:

```bash
composer remove bref/extra-php-extensions
```

## PostgreSQL enabled by default

The **PostgreSQL PDO extension** is now enabled by default. If you're using PostgreSQL, you no longer need any additional configuration.

If you had enabled it manually via a `php.ini` file, you can remove that line:

```diff filename="php/conf.d/php.ini"
-extension=pdo_pgsql
```

## Unified PHP runtime

Bref 3.0 consolidates the three separate layer types (function, FPM, console) into a **single unified layer** per PHP version. This simplification makes maintenance easier and provides a simpler mental model for users.

**Do you need to change anything?**

- **If you use `runtime: php-xxx` in `serverless.yml`** (for example `runtime: php-84-fpm`): no changes are needed!
- **If you deploy using container images**: you need to update your `Dockerfile`, ‚ö†Ô∏è read the [upgrade guide](../docs/upgrading/v3.mdx#updating-your-dockerfile-for-bref-30).
- **If you specify layers explicitly**: ‚ö†Ô∏è read the [upgrade guide](../docs/upgrading/v3.mdx#aws-lambda-layers-have-been-merged-into-a-single-layer).

A single layer/image is how it should have been from the start, and I'm really glad we're getting there now!

## Better CloudWatch logs

The [Bref Monolog formatter](https://github.com/brefphp/monolog-bridge) is now **enabled by default** in the Laravel and Symfony bridges. This formatter outputs logs in a format optimized for CloudWatch, making them easier to read and filter.

Before (plain text):
```
[2025-12-05 10:30:45] production.ERROR: Database connection failed
```

After (structured format):
```json
ERROR Database connection failed {"message":"Database connection failed","level":"ERROR","context":{...}}
```

This format makes logs easier to read in CloudWatch and enables powerful filtering with CloudWatch Logs Insights (e.g., filter by log level or exception class).

**Exception handling is also greatly improved:** Previously, exception stack traces were split across multiple CloudWatch log records (one per line), making them difficult to read and browse. Now, the entire exception (including stack trace) is grouped in a single JSON object, making debugging much easier.

That new logging approach also lets you read all the logs of a single request, by filtering via the AWS request ID.

## Lambda request ID and trace ID

Bref now exposes the **Lambda request ID** and **X-Ray trace ID** as environment variables on every invocation:

- `LAMBDA_REQUEST_ID`: the current AWS Lambda request ID.
- `_X_AMZN_TRACE_ID`: the [AWS X-Ray](/xray) trace ID.

These are useful for logging and tracing purposes, for example to group all logs of the same invocation in CloudWatch.

## New regions

Bref layers are now available in two additional regions:

- `ap-southeast-3` (Asia Pacific - Jakarta)
- `me-central-1` (Middle East - UAE)

## The `vendor/bin/bref` CLI is removed

The `vendor/bin/bref` CLI has been completely removed in Bref 3.0. This is a minor change since the CLI was already 90% removed in Bref 2.0 - only the `bref init` command remained for bootstrapping new projects.

We now have better onboarding with improved documentation and the `serverless` CLI commands. Here are the alternatives:

- **Scaffolding new projects**: Follow the [getting started guide](https://bref.sh/docs/setup) to create your `serverless.yml` manually.
- **Layer versions**: Visit [runtimes.bref.sh](https://runtimes.bref.sh/) or run `serverless bref:layers`.
- **Running console commands**: Use `serverless bref:cli` (this existed in v2).
- **Local development**: Use [Docker-based local development](https://bref.sh/docs/local-development).

## Improved Laravel onboarding

The [**`serverless.yml` template**](https://github.com/brefphp/laravel-bridge/blob/master/stubs/serverless.yml) that ships with the Laravel bridge has been greatly expanded to cover all the common building blocks of a Laravel application: HTTP API, artisan commands, SQS queues, S3 file storage, CloudFront CDN, database configuration, and more. Everything is documented with comments and links to the relevant documentation.

This should make the onboarding much simpler for new Laravel applications. If you have a Laravel application and are wondering what it would look like to run it on AWS Lambda with Bref, check out [the new template](https://github.com/brefphp/laravel-bridge/blob/master/stubs/serverless.yml) and the [getting started guide](https://bref.sh/docs/laravel/getting-started.mdx) for Laravel.


## Upgrading

Check out the [**v3 Upgrade Guide**](../docs/upgrading/v3.mdx) for a complete list of changes and instructions to upgrade your projects.


## Bref Cloud

Launched in 2025, **[Bref Cloud](https://bref.sh/cloud)** is the simplest way to deploy and monitor PHP applications on AWS Lambda. It replaces the AWS console with an intuitive dashboard to manage everything.

Here's an overview of the Bref Cloud features that launched recently:

**Application diagrams with live metrics**

Bref Cloud now shows a **diagram of your application's architecture**: CloudFront CDN, API Gateway, Lambda functions, SQS queues, S3 buckets. All that with live metrics: number of requests, response times, queue depth, storage usage, and errors across every component.

<Image className="mt-3 rounded-lg shadow-md hover:shadow-xl overflow-hidden transition-all border"
       src={cloudOverview} alt="Bref Cloud application overview with architecture diagram and metrics" />

**Private networks and databases**

You can now create private networks (VPC) from Bref Cloud. No AWS networking expertise required: Bref Cloud handles the VPC configuration, subnets, security groups, and connectivity (like NAT Gateway) so your databases are only accessible from your Lambda functions.

<Image className="mt-3 rounded-lg shadow-md hover:shadow-xl overflow-hidden transition-all border"
       src={cloudNetworkCreate} alt="Create a private network in Bref Cloud" />

### X-Ray performance tracing

With the release of Bref v3, I am super happy to release **tracing support in Bref Cloud via X-Ray**.

Bref already provided an [X-Ray integration](/xray) via an extra package. This integration is now available for free to all Bref Cloud users: [set it up](/docs/monitoring#bref-cloud) and start tracing your PHP code.

Once set up, Bref Cloud lets you explore X-Ray traces with a simple UI. Unlike AWS's native X-Ray console, which is generic and complex, Bref Cloud's UI is designed specifically for PHP: you can filter traces by controller, route, CLI command, or job class, and quickly drill down into individual requests to find bottlenecks.

<div className="flex gap-4 mt-3 items-start">
    <Image className="rounded-lg shadow-md border h-auto" style={{maxHeight: 350, width: 'auto'}} src={cloudXrayFiltersGeneral} alt="X-Ray trace filters in Bref Cloud" />
    <Image className="rounded-lg shadow-md border h-auto" style={{maxHeight: 350, width: 'auto'}} src={cloudXrayFiltersAnnotations} alt="X-Ray trace annotation filters in Bref Cloud" />
</div>

Traces are enriched by Bref with annotations to understand where time is spent in your application: cold starts, database queries, HTTP calls, AWS SDK calls, and more:

<Image className="mt-3 rounded-lg shadow-md hover:shadow-xl overflow-hidden transition-all border"
       src={cloudXrayTrace} alt="X-Ray trace explorer in Bref Cloud" />

Combined with the [improved CloudWatch logs](#better-cloudwatch-logs) and the [Lambda request ID](#lambda-request-id-and-trace-id) exposed in Bref v3, Bref Cloud gives you **complete observability** for your serverless PHP applications out of the box.

<a href="https://bref.sh/cloud" target="_blank"
   className="mt-4 inline-block rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
    Learn more about Bref Cloud ‚Üí
</a>


## Community Serverless Framework

While not directly related to Bref v3, this is worth mentioning: the original [Serverless Framework](https://www.serverless.com/) is no longer fully open-source with its v4 and requires a paid license. Since most of the Bref community relies on the `serverless` CLI to deploy their applications, this was a problem for many.

That's why we now maintain [**a community fork of Serverless Framework v3**](https://github.com/oss-serverless/serverless), which is fully open-source (MIT) and free to use without any limitations. The fork is stable, mature, and actively maintained by Bref maintainers and the community. It includes security fixes, dependency updates, and up-to-date support for new AWS Lambda runtimes.

On top of that, the CLI has been made lighter and faster by removing obsolete features like the Serverless Dashboard integration and Tencent Cloud support.

Migration is straightforward since it's a drop-in replacement:

```bash
npm remove serverless
npm install -g osls
```

No changes to your `serverless.yml` or project configuration are needed. The CLI command remains `serverless` (or `osls` if you want to have both the old and new CLI).

**We recommend all Bref users to migrate to this fork.**


## New observability packages

Also not part of Bref v3, but worth mentioning: two new packages were released in 2025 to help monitor PHP applications on AWS Lambda:

- [**Bref X-Ray**](https://bref.sh/xray): integrates AWS X-Ray with Bref for performance monitoring and distributed tracing. It tracks cold starts, database queries, HTTP calls, AWS SDK calls, and more. It supports both Laravel and Symfony.
- [**Bref Sentry**](https://bref.sh/sentry): extends Sentry's capabilities for AWS Lambda, capturing errors outside of PHP-FPM (such as timeouts or oversized responses), adding exception tracking to event-driven handlers (SQS, EventBridge, S3‚Ä¶), and tracking cold starts and AWS SDK calls.

These are commercial packages (not part of the open-source project) that help fill the observability gap for serverless PHP.




## Thanks

A huge thanks to the [Bref contributors](https://github.com/brefphp/bref/graphs/contributors), to the community for supporting the project, and to the open-source sponsors:

**Premium sponsors:**

- [Craft CMS](https://craftcms.com/?ref=bref.sh)
- [Voxie](https://voxie.com/?ref=bref)
- [MyBuilder](https://www.mybuilder.com/?ref=bref.sh)

**Gold sponsors:**

- [Depot](https://depot.dev/?ref=bref.sh)
- [SecuMailer](https://secumailer.com/?ref=bref.sh)
- [Ecomail](https://ecomail.cz/?ref=bref.sh)
- [Spreaker](https://www.spreaker.com/?ref=bref)
- [Runs On](https://runs-on.com/?ref=bref)
- [Playable](https://playable.com/?ref=bref)

And [many other personal sponsors](https://github.com/sponsors/mnapoli#sponsors)!

Thank you all!


## That's it!

I hope you enjoy Bref v3!

If you want to support the project, consider [sponsoring on GitHub](https://github.com/sponsors/mnapoli), subscribing to [Bref Pro support](/support), or trying out [Bref Cloud](/cloud). Bref has been thriving for 8 years thanks to the support of the community, and I hope it will continue to thrive for many more years to come ‚ù§Ô∏è

There is a complete [**v3 Upgrade Guide**](../docs/upgrading/v3.mdx) that you can follow.

Head to the docs to [**get started with Bref**](../), or check out the documentation for [Laravel](../docs/laravel/getting-started.mdx) or [Symfony](../docs/symfony/getting-started.mdx).

You can also join the community [in Slack](/docs/community.md), post details about your project in [Built with Bref](https://github.com/brefphp/bref/issues/267), or share your experience online and mention [@brefphp](https://twitter.com/brefphp) on Twitter.

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
    <a href="/docs" className="rounded-md shadow px-8 py-8 border text-center font-bold hover:bg-gray-100">What is Bref and serverless?</a>
    <a href="/docs/setup" className="rounded-md shadow px-8 py-8 border text-center font-bold hover:bg-gray-100">Get started with Bref</a>
</div>
